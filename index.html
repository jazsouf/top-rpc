<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TOP-RPS</title>
  </head>
  <body>
    <div>Let's play, first to 5</div>
    <button class="rock">R</button>
    <button class="paper">P</button>
    <button class="scissors">S</button>
    <div class="result"></div>
    <div class="score">
      <span class="score-player">0</span> -
      <span class="score-computer">0</span>
    </div>
  </body>
</html>

<script>
  const choices = ["rock", "paper", "scissors"];
  let roundWinner = "";

  const rock = document.querySelector(".rock");
  const paper = document.querySelector(".paper");
  const scissors = document.querySelector(".scissors");
  const result = document.querySelector(".result");
  let playerScore = document.querySelector(".score-player");
  let computerScore = document.querySelector(".score-computer");

  rock.addEventListener("click", function () {
    playRound("rock", getComputerChoice());
  });
  paper.addEventListener("click", function () {
    playRound("paper", getComputerChoice());
  });
  scissors.addEventListener("click", function () {
    playRound("scissors", getComputerChoice());
  });

  function getComputerChoice() {
    return choices[Math.floor(Math.random() * choices.length)];
  }

  function playRound(playerSelection, computerSelection) {
    playerSelection = playerSelection.toLowerCase();
    roundWinner = "";
    let playerScoreInt = parseInt(playerScore.textContent);
    let computerScoreInt = parseInt(computerScore.textContent);

    if (playerScoreInt === 5 || computerScoreInt === 5) {
      return (result.textContent =
        "The game is over, refresh the page to play again.");
    }

    if (playerSelection === computerSelection) {
      result.textContent = `It's a tie, you both chose ${computerSelection}!`;
    }

    if (computerSelection === "rock") {
      if (playerSelection === "paper") {
        roundWinner = "player";
        result.textContent = `You win, ${playerSelection} beats ${computerSelection}!`;
      } else if (playerSelection === "scissors") {
        roundWinner = "computer";
        result.textContent = `You lose, ${playerSelection} is beaten by ${computerSelection}!`;
      }
    }

    if (computerSelection === "paper") {
      if (playerSelection === "scissors") {
        roundWinner = "player";
        result.textContent = `You win, ${playerSelection} beats ${computerSelection}!`;
      } else if (playerSelection === "rock") {
        roundWinner = "computer";
        result.textContent = `You lose, ${playerSelection} is beaten by ${computerSelection}!`;
      }
    }

    if (computerSelection === "scissors") {
      if (playerSelection === "rock") {
        roundWinner = "player";
        result.textContent = `You win, ${playerSelection} beats ${computerSelection}!`;
      } else if (playerSelection === "paper") {
        roundWinner = "computer";
        result.textContent = `You lose, ${playerSelection} is beaten by ${computerSelection}!`;
      }
    }

    if (roundWinner === "player") {
      playerScoreInt += 1;
      playerScore.textContent = playerScoreInt;
    } else if (roundWinner === "computer") {
      computerScoreInt += 1;
      computerScore.textContent = computerScoreInt;
    }
  }
</script>
